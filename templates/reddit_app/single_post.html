{% extends 'base.html' %} {% block title %} {{post.title}} {% endblock title %}

{% block content %}

<div class="post-{{post.id}}">
    <h2>{{post.title}}</h2>
    <span>Posted by: {{post.author}}</span>
    <p>{{post.text}}</p>
    <p class="upvote post-vote" data-votes="{{post.votes}}" data-postid="{{ post.id }}" data-userid="{{ user.id }}">&uarr;</p>
    <p class="votes">{{post.votes}}</p>
    <p class="downvote post-vote" data-votes="{{post.votes}}" data-postid="{{ post.id }}" data-userid="{{ user.id }}">&darr;</p>
    {% comment %}    <a href="{% url "reddit_app:upvote" post.id %}">&uarr;</a>
    <p>{{post.votes}}</p>
    <a href="{% url "reddit_app:downvote" post.id %}">&darr;</a> {% endcomment %}
</div>

<div id="comments">
    <h2>Comments</h2>
    {% if comments.count %}
        {% for comment in comments %}
            <h3>{{comment.author}}: {{comment.text}}</h3>
        {% endfor %}
    {% else %}
        <p>Be the first to comment!</p>
    {% endif %}
</div>
{% if request.user.is_authenticated %}
    <div id="comment-form">
        <form method="POST" action="{% url "reddit_app:comment" post.id %}">
            {% csrf_token %}
            <textarea name="text" placeholder="write your comment"></textarea>
            <button>Comment</button>
        </form>
    </div>
{% else %}
    <p>Log in <a href="{% url "user_app:login" %}">here</a> to comment</p>
{% endif %}

{% load static %}
<script src="{% static "global/js/index.js" %}"></script>
{% endblock content %}